{% extends "base.html" %}

{% block title %}{{ config.site_title }} - Home{% endblock %}

{% block content %}
<section class="hero" style="background-image: url('{{ image_url }}/static/hero.jpeg');">
    <div class="container">
        <h1>{{ config.site_title }}</h1>
        <p class="hero-blurb">{{ config.site_description }}</p>
    </div>
</section>

<section class="status-banner">
    <div class="container">
        <p>Day <strong id="days-elapsed">{{ days_elapsed }}</strong> of 365 â€” <strong>{{ unique_species }}</strong> species documented since 1st January 2026!</p>
    </div>
</section>
<script>
(function() {
    var start = new Date('2026-01-01T00:00:00+05:30');
    var now = new Date();
    var days = Math.floor((now - start) / (1000 * 60 * 60 * 24)) + 1;
    if (days > 0 && days <= 365) {
        document.getElementById('days-elapsed').textContent = days;
    }
})();
</script>

<section class="nav-cards">
    <div class="container">
        <div class="cards-grid">
            
            
            <a href="{{ base_url }}/browse.html" class="nav-card">
                <div class="card-content">
                    <h3>Browse</h3>
                    <p>Explore all {{ unique_species }} species</p>
                </div>
            </a>
            <a href="{{ base_url }}/posts/" class="nav-card">
                <div class="card-content">
                    <h3>Posts</h3>
                    <p>Weekly narratives and observations</p>
                </div>
            </a>
            <a href="{{ base_url }}/about.html" class="nav-card">
                <div class="card-content">
                    <h3>About</h3>
                    <p>Know about this project here</p>
                </div>
            </a>
        </div>
    </div>
</section>

{% if featured_sightings %}
<section class="featured">
    <div class="container">
        <h2>Featured</h2>
        <div class="featured-grid">
            {% for sighting in featured_sightings %}
            <a href="{{ base_url }}/sightings/{{ sighting.id }}.html" class="featured-item">
                {% if sighting.images %}
                <img src="{{ image_url }}/web/{{ sighting.images[0].filename }}" alt="{{ sighting.common_name }}">
                {% endif %}
                <div class="featured-info">
                    <span class="featured-common">{{ sighting.common_name }}</span>
                    <span class="featured-scientific">{{ sighting.scientific_name }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% if latest_sightings %}
<section class="latest">
    <div class="container">
        <h2>Latest Sightings</h2>
        <div class="latest-strip">
            {% for sighting in latest_sightings %}
            <a href="{{ base_url }}/sightings/{{ sighting.id }}.html" class="latest-item">
                {% if sighting.images %}
                <img src="{{ image_url }}/thumb/{{ sighting.images[0].filename }}" alt="{{ sighting.common_name }}">
                {% endif %}
                <span class="latest-name">{{ sighting.common_name }}</span>
                <span class="latest-date">{{ sighting.captured_at | short_date }}</span>
            </a>
            {% endfor %}
            {% if sightings | length > 4 %}
            <a href="{{ base_url }}/browse.html" class="latest-item more">
                <span>View all</span>
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

{% if posts %}
<section class="recent-posts">
    <div class="container">
        <h2>Recent Posts</h2>
        <ul class="posts-list">
            {% for post in posts[:3] %}
            <li>
                <a href="{{ base_url }}/posts/{{ post.slug }}.html">
                    <span class="post-title">{{ post.title }}</span>
                    <span class="post-date">{{ post.date | date }}</span>
                </a>
            </li>
            {% endfor %}
        </ul>
        {% if posts | length > 3 %}
        <p><a href="{{ base_url }}/posts/">View all posts</a></p>
        {% endif %}
    </div>
</section>
{% endif %}
{% endblock %}
